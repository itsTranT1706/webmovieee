<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Korean Movies Section</title>
  <style>
    :root {
      --primary-bg: #151821;
      --card-bg: #1e2131;
      --accent-color: #9370DB;
      --tag-bg: #2c3149;
      --action-bg: #f5c518;
      --secondary-tag: #1a7d4c;
      --text-light: #a4a7b5;
      --text-primary: white;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.8);
      --border-radius: 8px;
      --transition-default: all 0.3s ease;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: var(--primary-bg);
      color: var(--text-primary);
      padding: 20px;
    }
   
  </style>
</head>
<body>
    <section id="movie-container-hero"  >

  
</section>
  <script>
    // Movie data
    const movies = [
      {
        title: "Bảo Hiểm Ly Hôn",
        img: "/api/placeholder/250/350",
        tags: { pd: 4, tm: 2 },
        rating: "7.5",
        year: "2023",
        episode: "Tập 4",
        description: "Câu chuyện về một cặp đôi đã ly hôn nhưng phải sống chung nhà vì hợp đồng bảo hiểm đặc biệt.",
        genres: ["Lãng mạn", "Hài hước"]
      },
      {
        title: "Lưỡi Dao Hiểm Hóc",
        img: "/api/placeholder/250/350",
        tags: { pd: 6, tm: 6 },
        rating: "7.9",
        year: "2023",
        episode: "Tập 6",
        description: "Bộ phim trinh thám theo chân một nữ thám tử tài năng điều tra vụ án giết người hàng loạt gây chấn động.",
        genres: ["Hình Sự", "Gay Cấn", "Tâm Lý"]
      },
      {
        title: "Quán Ăn của Ngài Heo",
        img: "/api/placeholder/250/350",
        tags: { pd: 6 },
        rating: "8.1",
        year: "2023",
        episode: "Tập 6",
        description: "Câu chuyện lãng mạn về một đầu bếp tài năng và người chủ quán ăn cổ trong thời kỳ Joseon.",
        genres: ["Lãng mạn", "Lịch sử", "Ẩm thực"]
      },
      {
        title: "Hoàng Hậu Ki",
        img: "/api/placeholder/250/350",
        tags: { pd: 5, tm: 3 },
        rating: "8.7",
        year: "2023",
        episode: "Tập 5",
        description: "Câu chuyện lịch sử về một cô gái nô lệ trở thành hoàng hậu quyền lực nhất trong lịch sử Joseon.",
        genres: ["Lịch sử", "Lãng mạn", "Chính trị"]
      },
      {
        title: "Yêu Lại Từ Đầu",
        img: "/api/placeholder/250/350",
        tags: { pd: 8, tm: 4 },
        rating: "7.8",
        year: "2023",
        episode: "Tập 8",
        description: "Một cặp đôi đã ly hôn tình cờ gặp lại nhau sau 5 năm và nhận ra tình cảm của họ chưa bao giờ phai nhạt.",
        genres: ["Lãng mạn", "Hài hước", "Tâm lý"]
      },
      {
        title: "Đặc Vụ Ngầm",
        img: "/api/placeholder/250/350",
        tags: { pd: 10, tm: 5 },
        rating: "8.3",
        year: "2023",
        episode: "Tập 10",
        description: "Một đặc vụ tài năng được giao nhiệm vụ xâm nhập vào tổ chức buôn bán vũ khí nguy hiểm nhất châu Á.",
        genres: ["Hành Động", "Gay Cấn", "Điệp Viên"]
      }
    ];

    // Initialize state variables
    let position = 0;
    let cardWidth = 265; // 250px width + 15px margin
    let visibleCards = 0;
    let containerWidth = 0;
    let maxPosition = 0;

    // DOM elements
    const container = document.getElementById('movie-container');
    const template = document.getElementById('movie-card-template');
    const prevBtn = document.querySelector('.prev-btn');
    const nextBtn = document.querySelector('.next-btn');
    const carousel = document.querySelector('.movie-carousel');
    
    // Function to render movie cards
    function renderMovies() {
      container.innerHTML = '';
      
      movies.forEach(movie => {
        const clone = document.importNode(template.content, true);
        
        // Set image and alt text
        const img = clone.querySelector('img');
        img.src = movie.img;
        img.alt = movie.title;
        
        // Set title
        clone.querySelector('.movie-info h3').textContent = movie.title;
        clone.querySelector('.movie-title').textContent = movie.title;
        
        // Set tags
        const tagsContainer = clone.querySelector('.movie-tags');
        tagsContainer.innerHTML = '';
        
        if (movie.tags.pd) {
          const pdTag = document.createElement('span');
          pdTag.className = 'tag pd-tag';
          pdTag.textContent = `PD. ${movie.tags.pd}`;
          tagsContainer.appendChild(pdTag);
        }
        
        if (movie.tags.tm) {
          const tmTag = document.createElement('span');
          tmTag.className = 'tag tm-tag';
          tmTag.textContent = `TM. ${movie.tags.tm}`;
          tagsContainer.appendChild(tmTag);
        }
        
        // Set movie details
        clone.querySelector('.imdb-rating').textContent = movie.rating;
        clone.querySelector('.movie-year').textContent = movie.year;
        clone.querySelector('.movie-episode').textContent = movie.episode;
        clone.querySelector('.movie-description').textContent = movie.description;
        
        // Set genres
        const genresContainer = clone.querySelector('.movie-genres');
        genresContainer.innerHTML = '';
        
        movie.genres.forEach(genre => {
          const genreTag = document.createElement('span');
          genreTag.className = 'genre-tag';
          genreTag.textContent = genre;
          genresContainer.appendChild(genreTag);
        });
        
        container.appendChild(clone);
      });
      
      // Setup button states and event listeners
      updateCarouselState();
      setupEventListeners();
    }
    
    // Function to update carousel dimensions and state
    function updateCarouselState() {
      // Get container width
      containerWidth = carousel.clientWidth;
      
      // Calculate how many cards can be visible at once
      visibleCards = Math.floor(containerWidth / cardWidth);
      
      // Calculate maximum scroll position
      const totalWidth = movies.length * cardWidth;
      maxPosition = Math.min(0, containerWidth - totalWidth);
      
      // Update navigation button states
      updateNavButtons();
    }
    
    // Function to update navigation button states (enabled/disabled)
    function updateNavButtons() {
      // Enable/disable prev button based on position
      prevBtn.disabled = position >= 0;
      prevBtn.style.opacity = position >= 0 ? '0.5' : '0.8';
      
      // Enable/disable next button based on position
      nextBtn.disabled = position <= maxPosition;
      nextBtn.style.opacity = position <= maxPosition ? '0.5' : '0.8';
    }
    
    // Function to setup all event listeners
    function setupEventListeners() {
      // Watch buttons
      document.querySelectorAll('.watch-btn').forEach(button => {
        button.addEventListener('click', handleWatchClick, { passive: true });
      });
      
      // Like buttons
      document.querySelectorAll('.like-btn').forEach(button => {
        button.addEventListener('click', handleLikeClick, { passive: true });
      });
      
      // Details buttons
      document.querySelectorAll('.details-btn').forEach(button => {
        button.addEventListener('click', handleDetailsClick, { passive: true });
      });
    }
    
    // Event handlers
    function handleWatchClick(e) {
      e.stopPropagation();
      const movieTitle = e.target.closest('.modal-content').querySelector('.movie-title').textContent;
      alert(`▶️ Đang phát: ${movieTitle}`);
    }
    
    function handleLikeClick(e) {
      e.stopPropagation();
      const button = e.target;
      button.classList.toggle('active');
      button.textContent = button.classList.contains('active') ? '❤️' : '♥';
      const movieTitle = e.target.closest('.modal-content').querySelector('.movie-title').textContent;
      alert(`${button.classList.contains('active') ? 'Đã thêm' : 'Đã xóa'} ${movieTitle} ${button.classList.contains('active') ? 'vào' : 'khỏi'} danh sách yêu thích`);
    }
    
    function handleDetailsClick(e) {
      e.stopPropagation();
      const movieTitle = e.target.closest('.modal-content').querySelector('.movie-title').textContent;
      alert(`ⓘ Chi tiết phim: ${movieTitle}`);
    }
    
    // Function to handle previous button click
    function handlePrevClick() {
      // Calculate number of cards to scroll
      const scrollCards = Math.min(3, visibleCards);
      
      // Calculate new position
      const newPosition = Math.min(0, position + (cardWidth * scrollCards));
      
      // Animate to new position if it's different
      if (newPosition !== position) {
        position = newPosition;
        container.style.transform = `translateX(${position}px)`;
        
        // Update button states
        updateNavButtons();
      }
    }
    
    // Function to handle next button click
    function handleNextClick() {
      // Calculate number of cards to scroll
      const scrollCards = Math.min(3, visibleCards);
      
      // Calculate new position
      const newPosition = Math.max(maxPosition, position - (cardWidth * scrollCards));
      
      // Animate to new position if it's different
      if (newPosition !== position) {
        position = newPosition;
        container.style.transform = `translateX(${position}px)`;
        
        // Update button states
        updateNavButtons();
      }
    }
    
    // Debounce function for resize event
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }
    
    // Function to handle window resize
    const handleResize = debounce(() => {
      // Update carousel state
      updateCarouselState();
      
      // Reset position if we're scrolled too far
      if (position < maxPosition) {
        position = maxPosition;
        container.style.transform = `translateX(${position}px)`;
      }
    }, 200);
    
    // Initialize the carousel
    function initCarousel() {
      // Render movies
      renderMovies();
      
      // Add event listeners for navigation
      prevBtn.addEventListener('click', handlePrevClick);
      nextBtn.addEventListener('click', handleNextClick);
      
      // Listen for window resize
      window.addEventListener('resize', handleResize);
      
      // Add touch/swipe support
      if ('ontouchstart' in window) {
        let touchStartX = 0;
        let touchEndX = 0;
        
        container.addEventListener('touchstart', e => {
          touchStartX = e.changedTouches[0].screenX;
        }, { passive: true });
        
        container.addEventListener('touchend', e => {
          touchEndX = e.changedTouches[0].screenX;
          const diffX = touchStartX - touchEndX;
          
          // If the swipe was significant
          if (Math.abs(diffX) > 50) {
            if (diffX > 0) {
              // Swipe left, go next
              handleNextClick();
            } else {
              // Swipe right, go prev
              handlePrevClick();
            }
          }
        }, { passive: true });
      }
    }
    
    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', initCarousel);
  </script>
</body>
</html>